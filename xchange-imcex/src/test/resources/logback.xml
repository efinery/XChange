<?xml version="1.0" encoding="UTF-8"?>

<configuration>

  <!-- Standard console appender for checking activity (short on detail) -->
  <appender name="CONSOLE_APPENDER" class="ch.qos.logback.core.ConsoleAppender">
    <!-- Simplified standard logging encoder -->
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} [%contextName] [%thread] %-5level %logger{36} - %msg %xEx%n</pattern>
    </encoder>
  </appender>

  <!-- Detail appender, containing simplified format and more detail -->
  <appender name="DETAIL_APPENDER" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <!-- Each application gets it's own log -->
    <file>log/xchange-imcex-detail.log</file>

    <!-- Rollover daily or when the file size exceeds 100Mb and keep a few -->
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <fileNamePattern>log/xchange-imcex-detail-%d{yyyy-MM-dd}.%i.log.gz</fileNamePattern>
      <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
        <maxFileSize>100MB</maxFileSize>
      </timeBasedFileNamingAndTriggeringPolicy>
      <maxHistory>7</maxHistory>
    </rollingPolicy>

    <!-- Standard logging encoder
         Triggers on:
         logger.error("Example", e); // Simple exception reporting
         logger.error("Example {}", x, e); // {} will be populated with value of x
    -->
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} ${HOSTNAME} [%thread] %-5level %logger{36} - %msg %xEx%n</pattern>
    </encoder>

  </appender>

  <!-- The default logging behaviour for third-party applications (Spring, Hibernate etc) -->
  <root level="WARN" >
    <appender-ref ref="CONSOLE_APPENDER" />
    <appender-ref ref="DETAIL_APPENDER" />
  </root>

  <!-- Selected third-party frameworks can be enabled here for development if required -->

  <!-- Hibernate debugging -->
  <!--<logger name="org.hibernate" level="DEBUG" />-->
  <!--<logger name="org.hibernate.tool.hbm2ddl" level="DEBUG" />-->
  <!--<logger name="org.hibernate.jdbc" level="DEBUG" />-->
  <!--<logger name="org.hibernate.SQL" level="DEBUG" />-->

  <!-- Wire and Context logging for the HttpClient -->
  <logger name="org.apache.http.wire" level="DEBUG" />
  <logger name="org.apache.http.impl.client" level="DEBUG" />

  <!-- Spring framework debugging -->
  <!--<logger name="org.springframework" level="INFO" />-->
  <!--<logger name="org.springframework.transaction" level="DEBUG" />-->
  <!--<logger name="org.springframework.beans.factory.config" level="DEBUG" />-->
  <!--<logger name="org.springframework.web" level="DEBUG" />-->
  <logger name="org.springframework.security" level="DEBUG" />

  <!--<logger name="oejs" level="DEBUG" />-->

  <!-- Define logging for organisation applications only -->
  <logger name="com.xeiam.xchange" level="DEBUG" />

</configuration>